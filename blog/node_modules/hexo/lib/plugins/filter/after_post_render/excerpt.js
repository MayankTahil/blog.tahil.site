'use strict';

var rExcerpt = /<!-{2,} *more *-{2,}>/;

function excerptFilter(data){
  var content = data.content;
  var match = content.match(/(<![- ]{2,}more[- ]{2,}>[\s\S+](.*)[\s\S+]<![- ]{2,}more[- ]{2,}><\/.+>)/mi);

  if(match) {
	data.excerpt = match[0].replace(/<!-{2,} *more *-{2,}>/gi,'');
	data.more = data.content = content.replace(match[0], '<a id="more"></a>');
  } else {
    data.excerpt = '';
    data.more = content;
  }
}

module.exports = excerptFilter;